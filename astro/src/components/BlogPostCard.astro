---
// src/components/BlogPostCard.astro
const { post, url } = Astro.props;

function slugify(text) {
  return text
    .toString()
    .toLowerCase()
    .replace(/\s+/g, '-')
    .replace(/[^\w-]+/g, '')
    .replace(/--+/g, '-')
    .replace(/^-+/, '')
    .replace(/-+$/, '');
}
---

<div class="card bg-base-200 transition-all duration-300 hover:bg-base-300 h-full">
  <a href={url} class="block">
    <figure><img src={post.image} alt={post.title} class="w-full h-48 object-cover" /></figure>
    <div class="card-body p-6">
      <h2 class="card-title text-2xl font-bold mb-2 hover:text-primary transition-colors duration-300">{post.title}</h2>
      <p class="text-base-content opacity-70 mb-4">{post.excerpt}</p>
      <div class="flex justify-between items-center text-sm text-base-content opacity-50 mt-auto">
        <a href={`/author/${slugify(post.author)}`} class="hover:text-primary transition-colors duration-300 text-start w-full">
          {post.author}
        </a>
        <span>{new Date(post.date).toLocaleDateString()}</span>
      </div>
    </div>
  </a>
</div>